# MCP サーバー設定ガイド

## 概要

このプロジェクトでは、以下のMCP（Model Context Protocol）サーバーを設定しています：

## 設定レベル別のMCPサーバー

### ユーザーレベル設定 (`.cursor/mcp.json`)
グローバルに利用可能なMCPサーバー

#### 1. Notion (`notion`)
- **用途**: Notion API連携 - 顧客DB・履歴DB管理
- **タイプ**: URLベース
- **認証**: ヘッダー認証（要設定）
- **設定レベル**: ユーザーレベル

#### 2. Serena (`serena`)
- **用途**: Serena AI連携 - コード分析・最適化
- **タイプ**: NPXパッケージ
- **認証**: 不要
- **設定レベル**: ユーザーレベル

### プロジェクトレベル設定 (`mcp.json`)
このプロジェクト専用のMCPサーバー

#### 3. Railway (`railway`)
- **用途**: Railway CLI連携 - デプロイ・ログ管理
- **タイプ**: コマンドベース
- **認証**: 環境変数（トークン設定済み）
- **設定レベル**: プロジェクトレベル

## 設定ファイル構造

```json
{
  "mcpServers": {
    "server-name": {
      "url": "https://example.com/mcp",           // URLベースの場合
      "command": "node",                          // コマンドベースの場合
      "args": ["script.js"],                      // コマンド引数
      "env": {                                    // 環境変数
        "KEY": "value"
      },
      "headers": {},                              // HTTPヘッダー
      "description": "サーバーの説明",
      "enabled": true,                            // 有効/無効
      "category": "category-name"                 // カテゴリ分類
    }
  }
}
```

## 重複排除の原則

1. **一意の名前**: 各MCPサーバーは小文字の一意な名前を持つ
2. **カテゴリ分類**: 機能別にカテゴリを設定
3. **説明の追加**: 各サーバーの用途を明確化
4. **有効/無効フラグ**: 必要に応じてサーバーを無効化可能

## トラブルシューティング

### 重複エラーの解決
- 大文字・小文字の違いによる重複を排除
- 同一機能のサーバーを統合
- 不要なサーバー設定を削除

### 認証エラーの解決
- Notion: 適切なAPIキーを設定
- Railway: トークンが有効か確認
- Serena: パッケージが最新か確認

## 更新履歴

- 2025-01-XX: 重複排除、カテゴリ分類追加
- 2025-01-XX: 初期設定
